{"ast":null,"code":"import _regeneratorRuntime from\"/Users/martinhampton/Documents/course_work/StrangersThings/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/martinhampton/Documents/course_work/StrangersThings/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/martinhampton/Documents/course_work/StrangersThings/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{registerUser,loginUser}from\"../api/api\";import{useParams,useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AccountForm=function AccountForm(_ref){var setToken=_ref.setToken;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useParams=useParams(),action=_useParams.action;var history=useHistory();console.log(\"action\",action);var onSubmitHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var authFn,_yield$authFn,error,token,message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();authFn=action===\"register\"?registerUser:loginUser;_context.next=4;return authFn(username,password);case 4:_yield$authFn=_context.sent;error=_yield$authFn.error;token=_yield$authFn.token;message=_yield$authFn.message;console.error(error);setToken(token);if(token){history.push(\"/\");}case 11:case\"end\":return _context.stop();}}},_callee);}));return function onSubmitHandler(_x){return _ref2.apply(this,arguments);};}();/* \n  const onSubmitHandler = async (event) => {\n    event.preventDefault();\n    try {\n      const { data } = await registerUser(username, password);\n      setToken(data.token);\n      history.push(\"/\");\n    } catch (error) {\n      console.error(error);\n    }\n  };\n*/var title=action===\"login\"?\"Log In\":\"Sign Up\";return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"ui form\",onSubmit:onSubmitHandler,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"centered ui header\",children:title}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,placeholder:\"username\",required:true,onChange:function onChange(event){return setUsername(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,placeholder:\"password\",minLength:\"8\",required:true,onChange:function onChange(event){return setPassword(event.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{className:\"ui button\",type:\"submit\",children:title})]})});};export default AccountForm;","map":{"version":3,"names":["React","useState","registerUser","loginUser","useParams","useHistory","AccountForm","setToken","username","setUsername","password","setPassword","action","history","console","log","onSubmitHandler","event","preventDefault","authFn","error","token","message","push","title","target","value"],"sources":["/Users/martinhampton/Documents/course_work/StrangersThings/src/components/AccountForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { registerUser, loginUser } from \"../api/api\";\nimport { useParams, useHistory } from \"react-router-dom\";\n\nconst AccountForm = ({ setToken }) => {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const { action } = useParams();\n  const history = useHistory();\n  console.log(\"action\", action);\n\n  const onSubmitHandler = async (event) => {\n    event.preventDefault();\n    const authFn = action === \"register\" ? registerUser : loginUser;\n\n    const { error, token, message } = await authFn(username, password);\n    console.error(error);\n\n    setToken(token);\n\n    if (token) {\n      history.push(\"/\");\n    }\n  };\n\n  /* \n  const onSubmitHandler = async (event) => {\n    event.preventDefault();\n    try {\n      const { data } = await registerUser(username, password);\n      setToken(data.token);\n      history.push(\"/\");\n    } catch (error) {\n      console.error(error);\n    }\n  };\n*/\n\n  const title = action === \"login\" ? \"Log In\" : \"Sign Up\";\n  return (\n    <div>\n      <form className=\"ui form\" onSubmit={onSubmitHandler}>\n        <h1 className=\"centered ui header\">{title}</h1>\n        <div className=\"field\">\n          <label>Username</label>\n          <input\n            type=\"text\"\n            value={username}\n            placeholder=\"username\"\n            required\n            onChange={(event) => setUsername(event.target.value)}\n          />\n        </div>\n        <div className=\"field\">\n          <label>Password</label>\n          <input\n            type=\"password\"\n            value={password}\n            placeholder=\"password\"\n            minLength=\"8\"\n            required\n            onChange={(event) => setPassword(event.target.value)}\n          />\n        </div>\n        <button className=\"ui button\" type=\"submit\">\n          {title}\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default AccountForm;\n"],"mappings":"gcAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,YAAY,CAAEC,SAAS,KAAQ,YAAY,CACpD,OAASC,SAAS,CAAEC,UAAU,KAAQ,kBAAkB,CAAC,wFAEzD,GAAMC,YAAW,CAAG,QAAdA,YAAW,MAAqB,IAAfC,SAAQ,MAARA,QAAQ,CAC7B,cAAgCN,QAAQ,CAAC,EAAE,CAAC,wCAArCO,QAAQ,eAAEC,WAAW,eAC5B,eAAgCR,QAAQ,CAAC,EAAE,CAAC,yCAArCS,QAAQ,eAAEC,WAAW,eAE5B,eAAmBP,SAAS,EAAE,CAAtBQ,MAAM,YAANA,MAAM,CACd,GAAMC,QAAO,CAAGR,UAAU,EAAE,CAC5BS,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAEH,MAAM,CAAC,CAE7B,GAAMI,gBAAe,6FAAG,iBAAOC,KAAK,iKAClCA,KAAK,CAACC,cAAc,EAAE,CAChBC,MAAM,CAAGP,MAAM,GAAK,UAAU,CAAGV,YAAY,CAAGC,SAAS,uBAEvBgB,OAAM,CAACX,QAAQ,CAAEE,QAAQ,CAAC,oCAA1DU,KAAK,eAALA,KAAK,CAAEC,KAAK,eAALA,KAAK,CAAEC,OAAO,eAAPA,OAAO,CAC7BR,OAAO,CAACM,KAAK,CAACA,KAAK,CAAC,CAEpBb,QAAQ,CAACc,KAAK,CAAC,CAEf,GAAIA,KAAK,CAAE,CACTR,OAAO,CAACU,IAAI,CAAC,GAAG,CAAC,CACnB,CAAC,uDACF,kBAZKP,gBAAe,6CAYpB,CAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAEE,GAAMQ,MAAK,CAAGZ,MAAM,GAAK,OAAO,CAAG,QAAQ,CAAG,SAAS,CACvD,mBACE,kCACE,cAAM,SAAS,CAAC,SAAS,CAAC,QAAQ,CAAEI,eAAgB,wBAClD,WAAI,SAAS,CAAC,oBAAoB,UAAEQ,KAAK,EAAM,cAC/C,aAAK,SAAS,CAAC,OAAO,wBACpB,mCAAuB,cACvB,cACE,IAAI,CAAC,MAAM,CACX,KAAK,CAAEhB,QAAS,CAChB,WAAW,CAAC,UAAU,CACtB,QAAQ,MACR,QAAQ,CAAE,kBAACS,KAAK,QAAKR,YAAW,CAACQ,KAAK,CAACQ,MAAM,CAACC,KAAK,CAAC,EAAC,EACrD,GACE,cACN,aAAK,SAAS,CAAC,OAAO,wBACpB,mCAAuB,cACvB,cACE,IAAI,CAAC,UAAU,CACf,KAAK,CAAEhB,QAAS,CAChB,WAAW,CAAC,UAAU,CACtB,SAAS,CAAC,GAAG,CACb,QAAQ,MACR,QAAQ,CAAE,kBAACO,KAAK,QAAKN,YAAW,CAACM,KAAK,CAACQ,MAAM,CAACC,KAAK,CAAC,EAAC,EACrD,GACE,cACN,eAAQ,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,UACxCF,KAAK,EACC,GACJ,EACH,CAEV,CAAC,CAED,cAAelB,YAAW"},"metadata":{},"sourceType":"module"}