{"ast":null,"code":"import _regeneratorRuntime from\"/Users/martinhampton/Documents/course_work/StrangersThings/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/Users/martinhampton/Documents/course_work/StrangersThings/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/martinhampton/Documents/course_work/StrangersThings/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/martinhampton/Documents/course_work/StrangersThings/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useHistory}from\"react-router-dom\";import{createPost}from\"../api/api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PostCreateForm=function PostCreateForm(_ref){var token=_ref.token,setPosts=_ref.setPosts,post=_ref.post;var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),price=_useState6[0],setPrice=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),location=_useState8[0],setLocation=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),errorMessage=_useState10[0],setErrorMessage=_useState10[1];return/*#__PURE__*/_jsx(\"form\",{className:\"ui form\",onSubmit:/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _yield$createPost,error,post;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return createPost(token,title,description,price,location);case 3:_yield$createPost=_context.sent;error=_yield$createPost.error;post=_yield$createPost.post;console.log(\"posts onSubmit\");if(post){console.log(\"post\",post);setPosts(function(prevPosts){return[].concat(_toConsumableArray(prevPosts),[post]);});setTitle(\"\");setDescription(\"\");setPrice(\"\");setLocation(\"\");history.push(\"/posts\");}else{setErrorMessage(error);}case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}(),children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create Post\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Title\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"field\",placeholder:\"Title\",required:true,autoComplete:\"off\",value:title,onChange:function onChange(event){setTitle(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"field\",placeholder:\"Description\",required:true,autoComplete:\"off\",value:description,onChange:function onChange(event){setDescription(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Price\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"field\",placeholder:\"Price\",required:true,autoComplete:\"off\",value:price,onChange:function onChange(event){setPrice(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Location\",children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"field\",placeholder:\"Location\",autoComplete:\"off\",value:location,onChange:function onChange(event){setLocation(event.target.value);}})]}),errorMessage?/*#__PURE__*/_jsx(\"p\",{className:\"ui negative message\",children:errorMessage}):null,/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"ui button\",children:\"Create\"})]})});};export default PostCreateForm;","map":{"version":3,"names":["React","useState","useHistory","createPost","PostCreateForm","token","setPosts","post","history","title","setTitle","description","setDescription","price","setPrice","location","setLocation","errorMessage","setErrorMessage","event","preventDefault","error","console","log","prevPosts","push","target","value"],"sources":["/Users/martinhampton/Documents/course_work/StrangersThings/src/components/PostCreateForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { createPost } from \"../api/api\";\n\nconst PostCreateForm = ({ token, setPosts, post }) => {\n  const history = useHistory();\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const [location, setLocation] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  return (\n    <form\n      className=\"ui form\"\n      onSubmit={async (event) => {\n        event.preventDefault();\n\n        const { error, post } = await createPost(\n          token,\n          title,\n          description,\n          price,\n          location\n        );\n\n        console.log(\"posts onSubmit\");\n\n        if (post) {\n          console.log(\"post\", post);\n          setPosts((prevPosts) => [...prevPosts, post]);\n          setTitle(\"\");\n          setDescription(\"\");\n          setPrice(\"\");\n          setLocation(\"\");\n          history.push(\"/posts\");\n        } else {\n          setErrorMessage(error);\n        }\n      }}\n    >\n      <>\n        <h2>Create Post</h2>\n        <div className=\"field\">\n          <label htmlFor=\"Title\">Title</label>\n          <input\n            type=\"text\"\n            className=\"field\"\n            placeholder=\"Title\"\n            required\n            autoComplete=\"off\"\n            value={title}\n            onChange={(event) => {\n              setTitle(event.target.value);\n            }}\n          ></input>\n        </div>\n        <div className=\"field\">\n          <label htmlFor=\"Description\">Description</label>\n          <input\n            type=\"text\"\n            className=\"field\"\n            placeholder=\"Description\"\n            required\n            autoComplete=\"off\"\n            value={description}\n            onChange={(event) => {\n              setDescription(event.target.value);\n            }}\n          ></input>\n        </div>\n\n        <div className=\"field\">\n          <label htmlFor=\"Price\">Price</label>\n          <input\n            type=\"text\"\n            className=\"field\"\n            placeholder=\"Price\"\n            required\n            autoComplete=\"off\"\n            value={price}\n            onChange={(event) => {\n              setPrice(event.target.value);\n            }}\n          ></input>\n        </div>\n        <div className=\"field\">\n          <label htmlFor=\"Location\">Location</label>\n          <input\n            type=\"text\"\n            className=\"field\"\n            placeholder=\"Location\"\n            autoComplete=\"off\"\n            value={location}\n            onChange={(event) => {\n              setLocation(event.target.value);\n            }}\n          ></input>\n        </div>\n\n        {errorMessage ? (\n          <p className=\"ui negative message\">{errorMessage}</p>\n        ) : null}\n\n        <button type=\"submit\" className=\"ui button\">\n          Create\n        </button>\n      </>\n    </form>\n  );\n};\n\nexport default PostCreateForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}